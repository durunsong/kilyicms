<template>
  <div>
    <h2>ç”¨æˆ·IP å’Œ VPN/ä»£ç†æ£€æµ‹</h2>
    <div flex uno-padding-5 flex-wrap>
      <el-card shadow="hover">
        <div flex items-center justify-between>
          <h3 class="text-blue-500">WebRTC å’Œ ipify å¯¹æ¯”åˆ¤æ–­æ¡ˆä¾‹ ğŸ”½</h3>
          <el-button type="primary" @click="reloadComponent" icon="Refresh">
            é‡æ–°æ£€æµ‹
          </el-button>
        </div>
        <div class="flex items-center gap-4">
          <WebrtcIp :key="componentKey"></WebrtcIp>
        </div>
      </el-card>
      <el-card shadow="hover">
        <div flex items-center justify-between>
          <h3 class="text-blue-500">
            ipify æ£€æµ‹çš„IPé€šè¿‡ç¬¬ä¸‰æ–¹æœåŠ¡åˆ¤æ–­(eg: proxycheck.io) ğŸ”½
          </h3>
          <el-button
            type="primary"
            @click="reloadComponentProxycheck"
            icon="Refresh"
          >
            é‡æ–°æ£€æµ‹
          </el-button>
        </div>
        <div class="flex items-center gap-4">
          <Proxycheck :key="componentKeyProxycheck"></Proxycheck>
        </div>
      </el-card>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
import WebrtcIp from "@/components/WebrtcIp/WebrtcIp.vue";
import Proxycheck from "@/components/WebrtcIp/Proxycheck.vue";

// ç”¨äºåˆ·æ–°ç»„ä»¶çš„ key
const componentKey = ref(0);

const componentKeyProxycheck = ref(0);

// é‡æ–°åŠ è½½ç»„ä»¶
const reloadComponent = () => {
  componentKey.value++;
};

const reloadComponentProxycheck = () => {
  componentKeyProxycheck.value++;
};
</script>
<style scoped>
:deep(.el-card) {
  margin: 5px;
  display: flex;
  overflow-y: auto;
  &::-webkit-scrollbar {
    display: none;
  }
}
</style>
