import{d as T,i as M,_ as W}from"./index-n9fM5Zhe.js";import{c as A}from"./element-BaWQJB8U.js";import{y as $,r as y,c as I,f as R,z as v,B as t,R as f,P as o,al as b,J as h,O as a,E,A as d,I as P}from"./vue-CDBYdBif.js";const j=$({__name:"WebrtcIp",setup(w){const{t:r}=T(),l=y(""),s=y(""),i=y({key:"",message:""}),c=I(()=>i.value.key==="MATCH"?"text-sky-500 font-bold text-xl":"text-red-500 font-bold text-xl"),g=()=>new Promise(e=>{const n={},C=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!C){console.error("WebRTC is not supported by your browser.");return}const x={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},k=new C(x);k.onicecandidate=p=>{if(p.candidate){const u=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(p.candidate.candidate);u&&!n[u[1]]&&(n[u[1]]=!0,e(u[1]))}},k.createDataChannel(""),k.createOffer().then(p=>k.setLocalDescription(p)).catch(p=>console.error("Error creating WebRTC offer",p)),setTimeout(()=>{k.localDescription?.sdp.split(`
`).forEach(p=>{if(p.startsWith("a=candidate:")){const u=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(p);u&&!n[u[1]]&&(n[u[1]]=!0,e(u[1]))}})},2e3)}),m=async()=>{try{const n=await(await fetch("https://api.ipify.org?format=json")).json();l.value=n.ip}catch(e){A.error(r("ipifyError",{ipify:"ipify"})),console.error("Error fetching ipify:",e)}};return R(async()=>{await m();const e=await g();s.value=e,e===l.value?i.value={key:"MATCH",message:"🟢"+r("comparisonMatch",{webrtc:"WebRTC",ipify:"ipify"})+"✅"}:i.value={key:"MISMATCH",message:"🔴"+r("comparisonMismatch",{webrtc:"WebRTC",ipify:"ipify"})+"❌"}}),(e,n)=>{const C=b("el-col"),x=b("el-row");return d(),v("div",null,[t("p",null,o(e.$t("stunRequestInfo")),1),f(x,null,{default:h(()=>[f(C,{span:24},{default:h(()=>[t("h4",null,[a(o(e.$t("webrtcPublicIp",{webrtc:"WebRTC"}))+"  ",1),t("span",null,o(s.value),1)])]),_:1}),f(C,{span:24},{default:h(()=>[t("h4",null,[a(o(e.$t("ipifyPublicIp",{ipify:"ipify"}))+"  ",1),t("span",null,o(l.value),1)])]),_:1})]),_:1}),t("p",{class:E(c.value)},o(i.value.message),3)])}}}),D=w=>M({url:"/proxycheck",method:"GET",params:{ip:w}}),H={class:"text-lg font-bold mb-4"},z={key:0,class:"text-red-500"},B={key:1,class:"space-y-2"},S={key:2},N=$({__name:"Proxycheck",setup(w){const{t:r}=T(),l=y(null),s=y(null),i=y(null),c=y({key:"",message:""}),g=I(()=>c.value.key==="MATCH"?"text-sky-500 font-bold text-xl":"text-red-500 font-bold text-xl"),m=async()=>{try{const e=await fetch("https://api64.ipify.org?format=json");if(e.ok)return(await e.json()).ip;throw new Error(r("ipFetchError"))}catch(e){throw console.error(e),new Error(r("ipFetchError"))}},_=async e=>{try{const n=await D(e);if(n.status===200)return n;throw new Error(r("proxyCheckStatusError"))}catch(n){throw console.error(n),new Error(r("proxyCheckError"))}};return R(async()=>{try{l.value=await m();const e=await _(l.value);s.value=e,e.proxy==="no"?c.value={key:"MATCH",message:"🟢"+r("comparisonMatch_ss",{service:"proxycheck.io"})+"✅"}:c.value={key:"MISMATCH",message:"🔴"+r("comparisonMismatch_ss",{service:"proxycheck.io"})+"❌"}}catch(e){console.error(r("errorOccurred"),e.message),i.value=e.message||r("genericError")}}),(e,n)=>(d(),v("div",null,[t("h2",H,o(e.$t("vpnCheckTitle")),1),i.value?(d(),v("div",z,[t("p",null,o(i.value),1)])):s.value?(d(),v("div",B,[t("p",null,[t("strong",null,o(e.$t("ipifyCurrentIP")),1),a(" "+o(l.value),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckRange")),1),a(" "+o(s.value.range),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckProxy")),1),a(" "+o(s.value.proxy),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckType")),1),a(" "+o(s.value.type),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckProvider")),1),a(" "+o(s.value.provider),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckCountry")),1),a(" "+o(s.value.country)+" ("+o(s.value.isocode)+") ",1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckCity")),1),a(" "+o(s.value.city),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckTimezone")),1),a(" "+o(s.value.timezone),1)]),t("p",null,[t("strong",null,o(e.$t("proxyCheckCoordinates")),1),a(" "+o(s.value.latitude)+", "+o(s.value.longitude),1)])])):(d(),v("div",S,[t("p",null,o(e.$t("dataLoading")),1)])),t("p",{class:E(g.value)},o(c.value.message),3)]))}}),V={flex:"","items-center":"","justify-between":""},O={class:"text-blue-500"},q={class:"flex items-center gap-4"},F={style:{width:"100%"}},K={flex:"","items-center":"","justify-between":""},L={class:"text-blue-500"},G={class:"flex items-center gap-4"},J=$({__name:"ip",setup(w){const r=y(0),l=y(0),s=()=>{r.value++},i=()=>{l.value++};return(c,g)=>{const m=b("el-button"),_=b("el-card");return d(),v("div",null,[t("h2",null,o(c.$t("detectionTitle",{keywords:"IP, VPN"})),1),f(_,{shadow:"hover"},{default:h(()=>[t("div",V,[t("h3",O," 🥝"+o(c.$t("webrtcComparison",{webrtc:"WebRTC",ipify:"ipify"}))+" 🔽 ",1),f(m,{type:"primary",onClick:s,icon:"Refresh"},{default:h(()=>[a(o(c.$t("recheck")),1)]),_:1})]),t("div",q,[(d(),P(j,{key:r.value}))])]),_:1}),f(_,{shadow:"hover"},{default:h(()=>[t("div",F,[t("div",K,[t("h3",L," 🥝"+o(c.$t("ipifyDetection",{ipify:"ipify",service:"proxycheck.io"}))+" 🔽 ",1),f(m,{type:"primary",onClick:i,icon:"Refresh"},{default:h(()=>[a(o(c.$t("recheck")),1)]),_:1})]),t("div",G,[(d(),P(N,{key:l.value}))])])]),_:1})])}}}),Y=W(J,[["__scopeId","data-v-18c6df1a"]]);export{Y as default};
